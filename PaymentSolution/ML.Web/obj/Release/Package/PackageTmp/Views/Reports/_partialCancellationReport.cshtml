@using ML.Web.Helpers
@model IEnumerable<ML.Web.Models.CancellationReportModel>
<div class="container-fluid table-cancelation">
    <div class="logo-height">
        <span class="brand-logo-small" style="margin-top: -21px;">
            <img src="~/Content/Images/logored.png" class="small-logo" alt="" />
        </span>
        <span class="pull-right" style="font-size: 20px;font-weight: bold;">
            @ViewBag.selectedHistory
        </span>
    </div>
    <table class="table">
        <tr>
            <td style="border: 1px solid" class="col-lg-3">Date</td>
            <td style="border: 1px solid">@ViewBag.dateselect</td>
        </tr>
        <tr>
            <td style="border: 1px solid" class="col-lg-3">Employer</td>
            <td style="border: 1px solid">@ViewBag.employer</td>
        </tr>
        <tr>
            <td style="border: 1px solid" class="col-lg-3">Group</td>
            <td style="border: 1px solid">@ViewBag.groupname</td>
        </tr>
    </table>
    @if (Model != null)
    {
        <table class="table table-striped table-responsive">
            <tr>
                <th class="text-center">
                    #
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.CancelTime)
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.InvoiceNo)
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.KPTN)
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.Group)
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.Employee)
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.Principal)
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.Charge)
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.OtherCharge)
                </th>
                <th class="text-center">
                    @Html.DisplayNameFor(model => model.CancelledBy)
                </th>
            </tr>
            @foreach (var item in Model.Select((value, i) => new { i, value }))
            {
                <tr>
                    <td class="text-center">
                        @Convert.ToInt32(item.i + 1)
                    </td>

                    <td class="text-center">
                        @Html.DisplayFor(modelItem => item.value.CancelTime)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.InvoiceNo)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.KPTN)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.Group)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.Employee)
                    </td>
                    <td class="text-right">
                        @Html.DisplayFor(modelItem => item.value.Principal)
                    </td>
                    <td class="text-right">
                        @Html.DisplayFor(modelItem => item.value.Charge)
                    </td>
                    <td class="text-right">
                        @Html.DisplayFor(modelItem => item.value.OtherCharge)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.CancelledBy)
                    </td>

                </tr>
            }
            <tr>
                <td>
                    <b>Total</b>
                </td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td class="text-right"><b>@Model.Sum(m => m.Principal).ToString("N", Cultures.Philippines)</b></td>
                <td class="text-right"><b>@Model.Sum(m => m.Charge).ToString("N", Cultures.Philippines)</b></td>
                <td class="text-right"><b>@Model.Sum(m => m.OtherCharge).ToString("N", Cultures.Philippines)</b></td>
                <td></td>

            </tr>

        </table>
    }
    else
    {
        <b><font color="red">@ViewBag.message</font></b>
    }
</div>